"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PullTransfer = void 0;
const stream_1 = require("stream");
class PullTransfer extends stream_1.PassThrough {
    constructor() {
        super(...arguments);
        this.stats = {
            bytesTransferred: 0
        };
    }
    cancel() {
        return this.emit('cancel');
    }
    write(chunk, encoding, cb) {
        this.stats.bytesTransferred += chunk.length;
        this.emit('progress', this.stats);
        if (typeof encoding === 'function') {
            cb = encoding;
            encoding = undefined;
        }
        return super.write(chunk, encoding, cb);
    }
    on(event, listener) {
        return super.on(event, listener);
    }
}
exports.PullTransfer = PullTransfer;
