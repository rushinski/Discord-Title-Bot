"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const exec_1 = __importDefault(require("./exec"));
class FileSystemCommand extends exec_1.default {
    constructor(connection, serial, path, options = {}) {
        super(connection, serial);
        this.path = path;
        this.options = options;
    }
    get rawCmd() {
        const args = Object.entries(this.options).reduce((acc, [key, val]) => {
            if (typeof val === 'undefined') {
                return acc;
            }
            const mapper = this.argsMapper[key];
            if (typeof mapper === 'function') {
                return acc.concat([
                    [mapper(val, this.options)]
                        .flat()
                        .filter(Boolean)
                ]);
            }
            if (val !== false) {
                return acc.concat(mapper);
            }
            return acc;
        }, []);
        return [
            this.rootCmd,
            ...args.filter(Boolean).sort().flat(),
            ...[this.path].flat()
        ].join(' ');
    }
    cast() {
        return;
    }
}
exports.default = FileSystemCommand;
